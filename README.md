# Kora Java OpenAPI Generator HTTP Server

- Scaffolding is generated by OpenAPI generator, minimal code.
- I wasn't sure if dedup is required for receipts, i.e. whether 2 identical receipts need to be assigned the same id or not, so in this implementation they will get different ids. (no "exactly once" guarantees)
- It was mentioned in the FAQ that this exercise was designed with the intent that it should take a few hours, so I keep all receipts in local LRU cache in memory. Max capacity is 10_000 Receipts.
- Test payloads were changed, since `type: string / format: time` doesn't support "HH:mm", as suggested here https://spec.openapis.org/registry/format/time.html.
- One of the point calculation rules says "round up to the nearest integer". One can `round up` (ceiling) or `round to the nearest integer` (half-up rounding) but not always both, that's an error in definition. I'm using ceiling, since it's suggested by the following example:
```
     3 Points - "Klarbrunn 12-PK 12 FL OZ" is 24 characters (a multiple of 3)
                item price of 12.00 * 0.2 = 2.4, rounded up is 3 points
```
For the reference: the rule with error
```
If the trimmed length of the item description is a multiple of 3, multiply the price by 0.2 
and _round up to the nearest integer_. The result is the number of points earned.
```


## Instructions on building container image / running service

Since I'm using Java (not Go), this service is containerized as requested in `Language Selection` section.

I tried to make the setup as simple as possible, so the setup boils down to 2 commands.

1. Create an image

The process of image creation includes among other things downloading build tools (gradle), dependencies and building the service from source. Refer to Dockerfile for details.
```shell
podman build -t kora-java-openapi-generator-httpserver -f Dockerfile .
```

2. Run service image
```shell
podman run --rm -it -p 8080:8080 kora-java-openapi-generator-httpserver
```

In the above commands you can substitute `podman` with `docker` if you prefer running containers as root.